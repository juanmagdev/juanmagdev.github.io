<!DOCTYPE html> <html lang="en"> <head> <meta http-equiv="Content-Type" content="text/html; charset=UTF-8"> <meta charset="utf-8"> <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"> <meta http-equiv="X-UA-Compatible" content="IE=edge"> <title> ThinkPad Red Led Control Extension | Juan Manuel García Delgado </title> <meta name="author" content="Juan Manuel García Delgado"> <meta name="description" content="Gnome extension to enable, disable, or make the red back LED dot of Lenovo ThinkPad laptops blink."> <meta name="keywords" content="jekyll, jekyll-theme, academic-website, portfolio-website"> <link rel="stylesheet" href="/assets/css/bootstrap.min.css?a4b3f509e79c54a512b890d73235ef04"> <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/css/mdb.min.css" integrity="sha256-jpjYvU3G3N6nrrBwXJoVEYI/0zw8htfFnhT9ljN3JJw=" crossorigin="anonymous"> <link defer rel="stylesheet" href="/assets/css/academicons.min.css?f0b7046b84e425c55f3463ac249818f5"> <link defer rel="stylesheet" type="text/css" href="https://fonts.googleapis.com/css?family=Roboto:300,400,500,700|Roboto+Slab:100,300,400,500,700|Material+Icons&amp;display=swap"> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-github.css?591dab5a4e56573bf4ef7fd332894c99" media="" id="highlight_theme_light"> <link rel="shortcut icon" href="data:image/svg+xml,&lt;svg%20xmlns=%22http://www.w3.org/2000/svg%22%20viewBox=%220%200%20100%20100%22&gt;&lt;text%20y=%22.9em%22%20font-size=%2290%22&gt;%F0%9F%92%BB&lt;/text&gt;&lt;/svg&gt;"> <link rel="stylesheet" href="/assets/css/main.css?d41d8cd98f00b204e9800998ecf8427e"> <link rel="canonical" href="https://juanmagdev.github.io/projects/ThinkpadRedLedExtension/"> <script src="/assets/js/theme.js?9a0c749ec5240d9cda97bc72359a72c0"></script> <link defer rel="stylesheet" href="/assets/css/jekyll-pygments-themes-native.css?5847e5ed4a4568527aa6cfab446049ca" media="none" id="highlight_theme_dark"> <script>initTheme();</script> </head> <body class="fixed-top-nav "> <header> <nav id="navbar" class="navbar navbar-light navbar-expand-sm fixed-top" role="navigation"> <div class="container"> <a class="navbar-brand title font-weight-lighter" href="/"> <span class="font-weight-bold">Juan Manuel</span> García Delgado </a> <button class="navbar-toggler collapsed ml-auto" type="button" data-toggle="collapse" data-target="#navbarNav" aria-controls="navbarNav" aria-expanded="false" aria-label="Toggle navigation"> <span class="sr-only">Toggle navigation</span> <span class="icon-bar top-bar"></span> <span class="icon-bar middle-bar"></span> <span class="icon-bar bottom-bar"></span> </button> <div class="collapse navbar-collapse text-right" id="navbarNav"> <ul class="navbar-nav ml-auto flex-nowrap"> <li class="nav-item "> <a class="nav-link" href="/">about </a> </li> <li class="nav-item "> <a class="nav-link" href="/blog/">blog </a> </li> <li class="nav-item active"> <a class="nav-link" href="/projects/">projects <span class="sr-only">(current)</span> </a> </li> <li class="nav-item "> <a class="nav-link" href="/repositories/">repositories </a> </li> <li class="nav-item "> <a class="nav-link" href="/cv/">cv </a> </li> <li class="nav-item"> <button id="search-toggle" title="Search" onclick="openSearchModal()"> <span class="nav-link">ctrl k <i class="ti ti-search"></i></span> </button> </li> <li class="toggle-container"> <button id="light-toggle" title="Change theme"> <i class="ti ti-sun-moon" id="light-toggle-system"></i> <i class="ti ti-moon-filled" id="light-toggle-dark"></i> <i class="ti ti-sun-filled" id="light-toggle-light"></i> </button> </li> </ul> </div> </div> </nav> <progress id="progress" value="0"> <div class="progress-container"> <span class="progress-bar"></span> </div> </progress> </header> <div class="container mt-5" role="main"> <div class="post"> <header class="post-header"> <h1 class="post-title">ThinkPad Red Led Control Extension</h1> <p class="post-description">Gnome extension to enable, disable, or make the red back LED dot of Lenovo ThinkPad laptops blink.</p> </header> <article> <div class="row mt-3"> <div class="col-12"> <figure> <picture> <source class="responsive-img-srcset" srcset="/assets/img/thinkpad-red-led-control/screenshot-extension-480.webp 480w,/assets/img/thinkpad-red-led-control/screenshot-extension-800.webp 800w,/assets/img/thinkpad-red-led-control/screenshot-extension-1400.webp 1400w," sizes="95vw" type="image/webp"></source> <img src="/assets/img/thinkpad-red-led-control/screenshot-extension.png" class="img-fluid rounded z-depth-1" width="100%" height="auto" loading="eager" onerror="this.onerror=null; $('.responsive-img-srcset').remove();"> </picture> </figure> </div> </div> <p>This GNOME Shell extension allows you to control the red LED light on the back of ThinkPad laptops. With this extension, you can toggle between different LED states such as:</p> <ul> <li><strong>LED Off</strong></li> <li><strong>LED On</strong></li> <li> <strong>LED Blinking</strong> (with customizable blinking speeds in the future)</li> </ul> <p>The extension interacts directly with the kernel to manage the LED states via commands that control the <strong>ec_sys</strong> module.</p> <p>You can download directly from the <a href="https://extensions.gnome.org/extension/7820/thinkpad-red-led/" rel="external nofollow noopener" target="_blank">oficial store</a> and find the source code in my <a href="https://github.com/juanmagdev/ThinkPad-Red-Led-Control" rel="external nofollow noopener" target="_blank">github repository</a>.</p> <h2 id="features">Features</h2> <ul> <li> <strong>LED Control</strong>: You can turn the LED on, off, or make it blink.</li> <li> <strong>Morse Code Message</strong>: You can input a text message, and the extension will flash the LED according to Morse code, providing a fun and functional way to communicate messages via the LED light.</li> </ul> <h2 id="known-bugs">Known Bugs</h2> <ul> <li> <strong>UI Update on Cancel</strong>: If a state is selected and then canceled, the interface updates to reflect the selection even though no action is taken.</li> <li> <strong>Cannot Read LED State</strong>: Currently, the extension cannot read the current state of the LED, meaning the state might not always be accurately reflected in the UI.</li> <li> <strong>State Reset After Restart</strong>: After a system reboot, the LED state is reset to the default (LED On).</li> </ul> <h2 id="todos">TODOs</h2> <ul> <li> <strong>Support for Uppercase and Special Characters in Morse Code</strong>: Currently, only lowercase letters and numbers are supported for Morse code. Uppercase letters and special characters need to be handled.</li> <li> <strong>Fix Known Bugs</strong>: Resolve issues with UI state updates, reading LED state, and state resetting after a reboot.</li> <li> <strong>Interface to Control Morse Code Blinking Speed</strong>: Implement a user interface to allow users to customize the speed of the Morse code blinking.</li> </ul> <h2 id="how-it-works">How It Works</h2> <p>The extension modifies the state of the ThinkPad LED light through the <strong>ec_sys</strong> module in the Linux kernel. Depending on the command chosen (off, on, or blinking), the appropriate command is executed via <code class="language-plaintext highlighter-rouge">pkexec</code> to manage the LED state.</p> <p>The LED control relies on manipulating specific bits in the kernel I/O interface. For example:</p> <ul> <li> <strong>LED On</strong>: The state of the LED is represented by the <strong>12th bit</strong> being set to a certain value (<code class="language-plaintext highlighter-rouge">0x0A</code>).</li> <li> <strong>LED Blinking</strong>: This is controlled by modifying the <strong>12th bit</strong>, where it is set to <code class="language-plaintext highlighter-rouge">0x8A</code> for blinking.</li> </ul> <p>Each state change directly manipulates this bit, causing the LED to behave according to the selected mode.</p> <h3 id="command-outputs">Command Outputs</h3> <ol> <li> <p><strong>LED Off</strong>: When the LED is off, the <code class="language-plaintext highlighter-rouge">12th bit</code> is set to <code class="language-plaintext highlighter-rouge">0x8A</code>. Here’s the corresponding command and output:</p> <p><strong>Command:</strong></p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>hexdump <span class="nt">-C</span> /sys/kernel/debug/ec/ec0/io
</code></pre></div> </div> <p><strong>Output:</strong></p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>00000000  e4 05 38 44 00 00 06 00  00 08 00 80 8a 01 80 00  |..8D............|
</code></pre></div> </div> </li> <li> <p><strong>LED Blinking</strong>: When the LED is set to blink, the <code class="language-plaintext highlighter-rouge">12th bit</code> is set to <code class="language-plaintext highlighter-rouge">0xCA</code>. Here’s the command and output:</p> <p><strong>Command:</strong></p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>hexdump <span class="nt">-C</span> /sys/kernel/debug/ec/ec0/io
</code></pre></div> </div> <p><strong>Output:</strong></p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>00000000  e4 05 38 44 00 00 06 00  00 08 00 80 ca 01 80 00  |..8D............|
</code></pre></div> </div> </li> <li> <p><strong>LED On</strong>: When the LED is on, the <code class="language-plaintext highlighter-rouge">12th bit</code> is set to <code class="language-plaintext highlighter-rouge">0x0A</code>. Here’s the command and output:</p> <p><strong>Command:</strong></p> <div class="language-bash highlighter-rouge"> <div class="highlight"><pre class="highlight"><code><span class="nv">$ </span><span class="nb">sudo </span>hexdump <span class="nt">-C</span> /sys/kernel/debug/ec/ec0/io
</code></pre></div> </div> <p><strong>Output:</strong></p> <div class="language-plaintext highlighter-rouge"> <div class="highlight"><pre class="highlight"><code>00000000  e4 05 38 44 00 00 06 00  00 08 00 80 0a 01 80 00  |..8D............|
</code></pre></div> </div> </li> </ol> <h2 id="credits">Credits</h2> <ul> <li>Special thanks to <strong>vali20</strong> for the idea on how to control the LED: <a href="https://www.reddit.com/r/thinkpad/comments/7n8eyu/thinkpad_led_control_under_gnulinux/" rel="external nofollow noopener" target="_blank">ThinkPad LED Control under GNU/Linux</a> </li> <li>Special thanks to <strong>c5e3</strong> for the Morse code script: <a href="https://gist.github.com/c5e3/e0264a546b249b635349f2ee6c302f36" rel="external nofollow noopener" target="_blank">Morse Code Script</a> </li> </ul> <h2 id="contributing">Contributing</h2> <p>I welcome any contributions to improve this extension. Feel free to open pull requests with bug fixes or feature requests. Your contributions are greatly appreciated!</p> <h2 id="license">License</h2> <p>This project is licensed under the MIT License.</p> </article> </div> </div> <footer class="fixed-bottom" role="contentinfo"> <div class="container mt-0"> © Copyright 2025 Juan Manuel García Delgado. Powered by <a href="https://jekyllrb.com/" target="_blank" rel="external nofollow noopener">Jekyll</a> with <a href="https://github.com/alshedivat/al-folio" rel="external nofollow noopener" target="_blank">al-folio</a>. </div> </footer> <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.min.js" integrity="sha256-/xUj+3OJU5yExlq6GSYGSHk7tPXikynS7ogEvDej/m4=" crossorigin="anonymous"></script> <script src="/assets/js/bootstrap.bundle.min.js"></script> <script src="https://cdn.jsdelivr.net/npm/mdbootstrap@4.20.0/js/mdb.min.js" integrity="sha256-NdbiivsvWt7VYCt6hYNT3h/th9vSTL4EDWeGs5SN3DA=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/masonry-layout@4.2.2/dist/masonry.pkgd.min.js" integrity="sha256-Nn1q/fx0H7SNLZMQ5Hw5JLaTRZp0yILA/FRexe19VdI=" crossorigin="anonymous"></script> <script defer src="https://cdn.jsdelivr.net/npm/imagesloaded@5.0.0/imagesloaded.pkgd.min.js" integrity="sha256-htrLFfZJ6v5udOG+3kNLINIKh2gvoKqwEhHYfTTMICc=" crossorigin="anonymous"></script> <script defer src="/assets/js/masonry.js" type="text/javascript"></script> <script defer src="https://cdn.jsdelivr.net/npm/medium-zoom@1.1.0/dist/medium-zoom.min.js" integrity="sha256-ZgMyDAIYDYGxbcpJcfUnYwNevG/xi9OHKaR/8GK+jWc=" crossorigin="anonymous"></script> <script defer src="/assets/js/zoom.js?85ddb88934d28b74e78031fd54cf8308"></script> <script src="/assets/js/no_defer.js?2781658a0a2b13ed609542042a859126"></script> <script defer src="/assets/js/common.js?e0514a05c5c95ac1a93a8dfd5249b92e"></script> <script defer src="/assets/js/copy_code.js?12775fdf7f95e901d7119054556e495f" type="text/javascript"></script> <script defer src="/assets/js/jupyter_new_tab.js?d9f17b6adc2311cbabd747f4538bb15f"></script> <script async src="https://d1bxh8uas1mnw7.cloudfront.net/assets/embed.js"></script> <script async src="https://badge.dimensions.ai/badge.js"></script> <script type="text/javascript">window.MathJax={tex:{tags:"ams"}};</script> <script defer type="text/javascript" id="MathJax-script" src="https://cdn.jsdelivr.net/npm/mathjax@3.2.2/es5/tex-mml-chtml.js" integrity="sha256-MASABpB4tYktI2Oitl4t+78w/lyA+D7b/s9GEP0JOGI=" crossorigin="anonymous"></script> <script defer src="https://cdnjs.cloudflare.com/polyfill/v3/polyfill.min.js?features=es6" crossorigin="anonymous"></script> <script type="text/javascript">function progressBarSetup(){"max"in document.createElement("progress")?(initializeProgressElement(),$(document).on("scroll",function(){progressBar.attr({value:getCurrentScrollPosition()})}),$(window).on("resize",initializeProgressElement)):(resizeProgressBar(),$(document).on("scroll",resizeProgressBar),$(window).on("resize",resizeProgressBar))}function getCurrentScrollPosition(){return $(window).scrollTop()}function initializeProgressElement(){let e=$("#navbar").outerHeight(!0);$("body").css({"padding-top":e}),$("progress-container").css({"padding-top":e}),progressBar.css({top:e}),progressBar.attr({max:getDistanceToScroll(),value:getCurrentScrollPosition()})}function getDistanceToScroll(){return $(document).height()-$(window).height()}function resizeProgressBar(){progressBar.css({width:getWidthPercentage()+"%"})}function getWidthPercentage(){return getCurrentScrollPosition()/getDistanceToScroll()*100}const progressBar=$("#progress");window.onload=function(){setTimeout(progressBarSetup,50)};</script> <script src="/assets/js/vanilla-back-to-top.min.js?f40d453793ff4f64e238e420181a1d17"></script> <script>addBackToTop();</script> <script type="module" src="/assets/js/search/ninja-keys.min.js?601a2d3465e2a52bec38b600518d5f70"></script> <ninja-keys hidebreadcrumbs noautoloadmdicons placeholder="Type to start searching"></ninja-keys> <script>let searchTheme=determineComputedTheme();const ninjaKeys=document.querySelector("ninja-keys");"dark"===searchTheme?ninjaKeys.classList.add("dark"):ninjaKeys.classList.remove("dark");const openSearchModal=()=>{const e=$("#navbarNav");e.hasClass("show")&&e.collapse("hide"),ninjaKeys.open()};</script> <script>const ninja=document.querySelector("ninja-keys");ninja.data=[{id:"nav-about",title:"about",section:"Navigation",handler:()=>{window.location.href="/"}},{id:"nav-blog",title:"blog",description:"",section:"Navigation",handler:()=>{window.location.href="/blog/"}},{id:"nav-projects",title:"projects",description:"Some of my projects (in progress)",section:"Navigation",handler:()=>{window.location.href="/projects/"}},{id:"nav-repositories",title:"repositories",description:"",section:"Navigation",handler:()=>{window.location.href="/repositories/"}},{id:"nav-cv",title:"cv",description:"",section:"Navigation",handler:()=>{window.location.href="/cv/"}},{id:"post-a-day-at-the-paris-olympic-games",title:"A day at the Paris Olympic Games.",description:"My friends and I attended the 2024 Olympic Games in Paris, where we enjoyed tennis and volleyball matches, and later explored the city at night. It was an exciting experience full of sports and adventure.",section:"Posts",handler:()=>{window.location.href="/blog/2024/jjoo2024/"}},{id:"post-my-graduation-day-finishing-my-studies",title:"My Graduation day. Finishing my studies.",description:"On July 1st, I celebrated my graduation\u2014a day full of excitement and pride, where my classmates and I finally saw the hard work of the past five years pay off.",section:"Posts",handler:()=>{window.location.href="/blog/2024/graduation/"}},{id:"projects-people-recognition",title:"People Recognition",description:"A modular system for real-time detection and recognition of people using advanced computer vision and deep learning techniques.",section:"Projects",handler:()=>{window.location.href="/projects/PeopleRecognition/"}},{id:"projects-thinkpad-red-led-control-extension",title:"ThinkPad Red Led Control Extension",description:"Gnome extension to enable, disable, or make the red back LED dot of Lenovo ThinkPad laptops blink.",section:"Projects",handler:()=>{window.location.href="/projects/ThinkpadRedLedExtension/"}},{id:"socials-email",title:"Send email",section:"Socials",handler:()=>{window.open("mailto:%6D%65@%6A%75%61%6E%6D%61%67%64.%64%65%76","_blank")}},{id:"socials-github",title:"GitHub",section:"Socials",handler:()=>{window.open("https://github.com/juanmagdev","_blank")}},{id:"socials-linkedin",title:"LinkedIn",section:"Socials",handler:()=>{window.open("https://www.linkedin.com/in/juan-manuel-garc\xeda-delgado-460585171","_blank")}},{id:"light-theme",title:"Change theme to light",description:"Change the theme of the site to Light",section:"Theme",handler:()=>{setThemeSetting("light")}},{id:"dark-theme",title:"Change theme to dark",description:"Change the theme of the site to Dark",section:"Theme",handler:()=>{setThemeSetting("dark")}},{id:"system-theme",title:"Use system default theme",description:"Change the theme of the site to System Default",section:"Theme",handler:()=>{setThemeSetting("system")}}];</script> <script src="/assets/js/shortcut-key.js?6f508d74becd347268a7f822bca7309d"></script> </body> </html>